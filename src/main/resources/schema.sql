DROP TABLE IF EXISTS history;
DROP TABLE IF EXISTS portal_item;
DROP TABLE IF EXISTS portal_office;

CREATE TABLE portal_item (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    recipient_name VARCHAR(255) NOT NULL,
    type VARCHAR(50) NOT NULL,
    recipient_index VARCHAR(10) NOT NULL,
    recipient_address VARCHAR(255) NOT NULL,
    status VARCHAR(20) NOT NULL
);

CREATE TABLE portal_office (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    "index" VARCHAR(10) NOT NULL,
    name VARCHAR(255) NOT NULL,
    address VARCHAR(255) NOT NULL
);

CREATE TABLE history (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    portal_item_id BIGINT NOT NULL REFERENCES portal_item(id) ON DELETE CASCADE,
    portal_office_id BIGINT NOT NULL REFERENCES portal_office(id) ON DELETE SET NULL,
    timestamp TIMESTAMP NOT NULL,
    event VARCHAR(255) NOT NULL
);